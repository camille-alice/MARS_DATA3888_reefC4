knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '/Users/camillekarski/Documents/Uni/DATA3888')
library(tidyverse)
library(tuneR)
library(devtools)
library(ggplot2)
library(tsfeatures)
library(sf)
#reading in reef data set
reef_df =  read.csv("./DATA3888_data/Reef Check Data Raw.csv")
#reading in geomorphic data set
rugosity_df = st_read("./DATA3888_data/geomorphic.gpkg")
reef_df
#reading in reef data set ! with variables
reef_df =  read.csv("./DATA3888_data/Reef_Check_with_cortad_variables_with_annual_rate_of_SST_change.csv")
#reading in geomorphic data set
rugosity_df = st_read("./DATA3888_data/geomorphic.gpkg")
reef_df
rugosity_df
head(rugosity_df)
rugosity_df[4]
rugosity_df[1]
class(rugosity_df)
class(rugosity_df)
class(reef_df)
reef_st = st_read(reef_df)
#change to class sf
reef_df$geom = reef_df %>% st_as_sf(coords = c("Longitude.Degrees", "Latitude.Degrees"), crs=4326)
reef_df
class(reef_df$geom)
reef_df$geom
st_crs(reef_df$geom)
st_crs(rugosity_df)
#change to class sf
reef_df$geomT = reef_df %>% st_as_sf(coords = c("Longitude.Degrees", "Latitude.Degrees"))
#checking to ensure both are same CRS
st_crs(reef_df$geomT)
#st_crs(rugosity_df)
#change to class sf
reef_df$geom = reef_df %>% st_as_sf(coords = c("Longitude.Degrees", "Latitude.Degrees"), crs=4326)
#checking to ensure both are same CRS
st_crs(reef_df$geom)
st_crs(rugosity_df)
#Reading in Data
reef = read.csv("DATA3888_data/Reef_Check_with_cortad_variables_with_annual_rate_of_SST_change.csv")
world_map = map_data("world")
#creating new dataframe for visualization
reef_vis = data.frame(Reef.ID = reef$Reef.ID, Reef.Name = reef$Reef.Name, Country = reef$Country, Average_bleaching = reef$Average_bleaching, lat = reef$Latitude.Degrees, wraplong = reef$Longitute.Degrees)
reef
#Reading in Data
reef = read.csv("DATA3888_data/Reef_Check_with_cortad_variables_with_annual_rate_of_SST_change.csv")
world_map = map_data("world")
#creating new dataframe for visualization
reef_vis = data.frame(Reef.ID = reef$Reef.ID, Reef.Name = reef$Reef.Name, Country = reef$Country, Average_bleaching = reef$Average_bleaching, lat = reef$Latitude.Degrees, wraplong = reef$Longitute.Degrees)
reef_vis
reef
world_map
#creating data frame grouped by reef.id and obtaining mean over all years, only keeping distinct rows
reef_gpd = reef %>% group_by(Reef.ID) %>%
mutate(Average_bleaching_m = round(mean(Average_bleaching),2)) %>%
distinct(Reef.ID, .keep_all=TRUE)
#re ordering so data appears on map with most bleached on top as ggplot plots from row=1
reef_gpd = reef_gpd[order(reef_gpd$Average_bleaching_m),]
reef_vis_map = ggplot() +
geom_polygon(data =world_map, aes(x=long, y = lat, group = group), fill="grey", alpha=0.3) +
geom_point(data =reef_gpd, aes(x= wraplong, y=lat,
size=Average_bleaching_m,
color=Average_bleaching_m,
ids = Reef.Name,
text = paste('Reef Name: ', reef_gpd$Reef.Name,
'<br>Country: ', reef_gpd$Country,
'<br>Bleaching %: ', reef_gpd$Average_bleaching_m)),
alpha = 0.7) +
scale_colour_viridis(option = "plasma") + #guide = "legend",
labs(x = "Longitude", y = "Latitude") +
ggtitle("Average Coral Bleaching", subtitle = "From 1997-2017") +
theme_minimal() +
theme(plot.title = element_text(size = 14, face = "bold"),
legend.title=element_text(size=10),
legend.text=element_text(size=9),
legend.position="bottom") +
guides(color= guide_legend(title = "Average % of Coral Bleached"),size=guide_legend(title = "Average % of Coral Bleached"))
#creating data frame grouped by reef.id and obtaining mean over all years, only keeping distinct rows
reef_gpd = reef %>% group_by(Reef.ID) %>%
mutate(Average_bleaching_m = round(mean(Average_bleaching),2)) %>%
distinct(Reef.ID, .keep_all=TRUE)
#re ordering so data appears on map with most bleached on top as ggplot plots from row=1
reef_gpd = reef_gpd[order(reef_gpd$Average_bleaching_m),]
reef_vis_map = ggplot() +
geom_polygon(data =world_map, aes(x=long, y = lat, group = group), fill="grey", alpha=0.3) +
geom_point(data =reef_gpd, aes(x= wraplong, y=lat,
size=Average_bleaching_m,
color=Average_bleaching_m,
ids = Reef.Name,
text = paste('Reef Name: ', reef_gpd$Reef.Name,
'<br>Country: ', reef_gpd$Country,
'<br>Bleaching %: ', reef_gpd$Average_bleaching_m)),
alpha = 0.7) +
scale_colour_viridis(option = "plasma") + #guide = "legend",
labs(x = "Longitude", y = "Latitude") +
ggtitle("Average Coral Bleaching", subtitle = "From 1997-2017") +
theme_minimal() +
theme(plot.title = element_text(size = 14, face = "bold"),
legend.title=element_text(size=10),
legend.text=element_text(size=9),
legend.position="bottom") +
guides(color= guide_legend(title = "Average % of Coral Bleached"),size=guide_legend(title = "Average % of Coral Bleached"))
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '/Users/camillekarski/Documents/Uni/DATA3888')
library(tidyverse)
library(tuneR)
library(devtools)
library(ggplot2)
library(tsfeatures)
library(sf)
library(maps)
library(reshape2)
library(viridis)
library(plotly)
library(GGally)
#creating data frame grouped by reef.id and obtaining mean over all years, only keeping distinct rows
reef_gpd = reef %>% group_by(Reef.ID) %>%
mutate(Average_bleaching_m = round(mean(Average_bleaching),2)) %>%
distinct(Reef.ID, .keep_all=TRUE)
#re ordering so data appears on map with most bleached on top as ggplot plots from row=1
reef_gpd = reef_gpd[order(reef_gpd$Average_bleaching_m),]
reef_vis_map = ggplot() +
geom_polygon(data =world_map, aes(x=long, y = lat, group = group), fill="grey", alpha=0.3) +
geom_point(data =reef_gpd, aes(x= wraplong, y=lat,
size=Average_bleaching_m,
color=Average_bleaching_m,
ids = Reef.Name,
text = paste('Reef Name: ', reef_gpd$Reef.Name,
'<br>Country: ', reef_gpd$Country,
'<br>Bleaching %: ', reef_gpd$Average_bleaching_m)),
alpha = 0.7) +
scale_colour_viridis(option = "plasma") + #guide = "legend",
labs(x = "Longitude", y = "Latitude") +
ggtitle("Average Coral Bleaching", subtitle = "From 1997-2017") +
theme_minimal() +
theme(plot.title = element_text(size = 14, face = "bold"),
legend.title=element_text(size=10),
legend.text=element_text(size=9),
legend.position="bottom") +
guides(color= guide_legend(title = "Average % of Coral Bleached"),size=guide_legend(title = "Average % of Coral Bleached"))
#scale_size_continuous(limits=c(0, 100), breaks=seq(0,100, by=25)) +
#theme(legend.position="none")
#stat_density2d(data = reef_gpd, aes(x = wraplong, y= lat, fill = Average_bleaching, alpha = I(.5)),
# size = 1, bins = 36, geom = "polygon", show.legend = F) + scale_fill_gradient(low = "yellow", high = "red") +
reef_vis_map
reef
#creating data frame grouped by reef.id and obtaining mean over all years, only keeping distinct rows
reef_gpd = reef %>% group_by(Reef.ID) %>%
mutate(Average_bleaching_m = round(mean(Average_bleaching),2)) %>%
distinct(Reef.ID, .keep_all=TRUE)
#re ordering so data appears on map with most bleached on top as ggplot plots from row=1
reef_gpd = reef_gpd[order(reef_gpd$Average_bleaching_m),]
reef_vis_map = ggplot() +
geom_polygon(data =world_map, aes(x=long, y = lat, group = group), fill="grey", alpha=0.3) +
geom_point(data =reef_gpd, aes(x= Longitude.Degrees, y=Latitude.Degrees,
size=Average_bleaching_m,
color=Average_bleaching_m,
ids = Reef.Name,
text = paste('Reef Name: ', reef_gpd$Reef.Name,
'<br>Country: ', reef_gpd$Country,
'<br>Bleaching %: ', reef_gpd$Average_bleaching_m)),
alpha = 0.7) +
scale_colour_viridis(option = "plasma") + #guide = "legend",
labs(x = "Longitude", y = "Latitude") +
ggtitle("Average Coral Bleaching", subtitle = "From 1997-2017") +
theme_minimal() +
theme(plot.title = element_text(size = 14, face = "bold"),
legend.title=element_text(size=10),
legend.text=element_text(size=9),
legend.position="bottom") +
guides(color= guide_legend(title = "Average % of Coral Bleached"),size=guide_legend(title = "Average % of Coral Bleached"))
#scale_size_continuous(limits=c(0, 100), breaks=seq(0,100, by=25)) +
#theme(legend.position="none")
#stat_density2d(data = reef_gpd, aes(x = wraplong, y= lat, fill = Average_bleaching, alpha = I(.5)),
# size = 1, bins = 36, geom = "polygon", show.legend = F) + scale_fill_gradient(low = "yellow", high = "red") +
reef_vis_map
rugosity_df
class(rugosity_df)
ggplot(data = rugosity_df) +
geom_sf()
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
colour = "black", fill = "gray90") +
geom_polygon(data = rugosity_df,
colour = "red", fill = "gray80") +
theme_void()
rugosity_df
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
colour = "black", fill = "gray90") +
geom_polygon(data = rugosity_df,aes(group = class),
colour = "red", fill = "gray80") +
theme_void()
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
colour = "black", fill = "gray90") +
geom_polygon(data = rugosity_df,aes(x = geom, group = class),
colour = "red", fill = "gray80") +
theme_void()
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
colour = "black", fill = "gray90") +
geom_sf(data = rugosity_df,aes(group = class),
colour = "red", fill = "gray80") +
theme_void()
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
colour = "grey", fill = "gray90") +
geom_sf(data = rugosity_df,aes(group = class),
colour = "red", fill = "gray80") +
theme_void()
#checking to ensure both are same CRS
#st_crs(reef_df$geom)
st_crs(world_map)
ggplot() +
geom_sf(data = reef_df,
colour = "grey", fill = "blue") +
geom_sf(data = rugosity_df,aes(group = class),
colour = "red", fill = "gray80") +
theme_void()
ggplot() +
geom_sf(data = reef_df$geom,
colour = "grey", fill = "blue") +
geom_sf(data = rugosity_df,aes(group = class),
colour = "red", fill = "gray80") +
theme_void()
reef_test =st_read("DATA3888_data/Reef_Check_with_cortad_variables_with_annual_rate_of_SST_change.csv")
ggplot(data = rugosity_df) +
geom_sf()
ggplot() +
geom_polygon(data = world,
aes(x = long, y = lat, group = group),
colour = "black", fill = "gray90") +
geom_polygon(data = rugosity_df,
aes(x = long, y = lat, group = group),
colour = "red", fill = "gray80") +
theme_void()
